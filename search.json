[{"path":"https://selkamand.github.io/sunburst/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 sunburst authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://selkamand.github.io/sunburst/articles/general_usage.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"General Usage","text":"can install development version sunburst like :","code":"# install.packages(\"remotes\") remotes::install_github(\"selkamand/sunburst\")"},{"path":[]},{"path":"https://selkamand.github.io/sunburst/articles/general_usage.html","id":"build-microbial-sunbursts","dir":"Articles","previous_headings":"Usage","what":"Build Microbial Sunbursts","title":"General Usage","text":"Want visualise microbial composition? See microbial sunbursts vignette","code":""},{"path":[]},{"path":"https://selkamand.github.io/sunburst/articles/general_usage.html","id":"load-library","dir":"Articles","previous_headings":"Usage > General usage","what":"Load library","title":"General Usage","text":"","code":"library(sunburst)"},{"path":"https://selkamand.github.io/sunburst/articles/general_usage.html","id":"load-data","dir":"Articles","previous_headings":"Usage > General usage","what":"Load data","title":"General Usage","text":"Input data character vector ‘lineages’. segment size sunburst related frequency lineage input vector.","code":"lineages <- c(   \"Cancer Cohort>HM>BALL\", \"Cancer Cohort>HM>BALL\", \"Cancer Cohort>HM>BALL\",   \"Cancer Cohort>HM>TALL\", \"Cancer Cohort>HM>TALL\", \"Cancer Cohort>HM>AML\",   \"Cancer Cohort>HM>AML>CBF\", \"Cancer Cohort>HM>AML>CBF\", \"Cancer Cohort>HM>AML>M7-AML\",   \"Cancer Cohort>ST>NBL\", \"Cancer Cohort>ST>NBL\", \"Cancer Cohort>ST>NBL\",   \"Cancer Cohort>ST>NBL\", \"Cancer Cohort>ST>NBL\", \"Cancer Cohort>ST>NBL\",   \"Cancer Cohort>ST>NBL\", \"Cancer Cohort>ST>NBL\", \"Cancer Cohort>ST>WLM\",    \"Cancer Cohort>ST>WLM\", \"Cancer Cohort>ST>WLM\", \"Cancer Cohort>ST>WLM\",   \"Cancer Cohort>ST>OS\", \"Cancer Cohort>ST>OS\", \"Cancer Cohort>ST>EWS\",   \"Cancer Cohort>ST>EWS\", \"Cancer Cohort>BT>MB\",\"Cancer Cohort>BT>MB\",   \"Cancer Cohort>BT>MB\", \"Cancer Cohort>BT>MB\", \"Cancer Cohort>BT>MB>G4\",   \"Cancer Cohort>BT>MB>G3\",\"Cancer Cohort>BT>MB>HGG\" )"},{"path":"https://selkamand.github.io/sunburst/articles/general_usage.html","id":"build-sunburst-plot","dir":"Articles","previous_headings":"Usage > General usage","what":"Build sunburst plot","title":"General Usage","text":"","code":"lineage2sunburst(lineages)"},{"path":[]},{"path":"https://selkamand.github.io/sunburst/articles/general_usage.html","id":"data-input","dir":"Articles","previous_headings":"Usage > Sunburst from network style dataframe","what":"Data Input","title":"General Usage","text":"Instead building sunburst lineage strings, might want something congruent ’re network-analysis compatible dataframes. can build sunburst dataframe explicitly list every label-parent pair value associate (dictates sunburst segment size). example sunburst can produced using following table","code":"data=data.frame(   Label = c(     \"ST\", \"HM\", \"NBL\", \"BT\", \"MB\", \"AML\",      \"WLM\", \"BALL\", \"CBF\", \"EWS\", \"OS\",      \"TALL\", \"G3\", \"G4\", \"HGG\", \"M7-AML\"     ),   Parent = c(     \"Cancer Cohort\", \"Cancer Cohort\", \"ST\", \"Cancer Cohort\",       \"BT\", \"HM\", \"ST\", \"HM\", \"AML\", \"ST\", \"ST\", \"HM\", \"MB\",      \"MB\", \"MB\", \"AML\"     ),   Value = c(16, 9, 8, 7, 7, 4, 4, 3, 2, 2, 2, 2, 1, 1, 1, 1) )"},{"path":"https://selkamand.github.io/sunburst/articles/general_usage.html","id":"build-sunburst","dir":"Articles","previous_headings":"Usage > Sunburst from network style dataframe","what":"Build Sunburst","title":"General Usage","text":"","code":"sunburst(data = data)"},{"path":"https://selkamand.github.io/sunburst/articles/general_usage.html","id":"acknowledgements","dir":"Articles","previous_headings":"","what":"Acknowledgements","title":"General Usage","text":"engine driving functionality package plotly packages. big thanks involved creation maintenance packages.","code":""},{"path":"https://selkamand.github.io/sunburst/articles/microbial_sunbursts.html","id":"aim","dir":"Articles","previous_headings":"","what":"Aim","title":"Microbial Sunburst Plots","text":"build sunburst chart represents microbial composition microbiome sample. input vector ncbi taxonomy IDs (taxid). taxids abundance = frequency input vector","code":""},{"path":"https://selkamand.github.io/sunburst/articles/microbial_sunbursts.html","id":"libraries","dir":"Articles","previous_headings":"","what":"Libraries","title":"Microbial Sunburst Plots","text":"’ll need two R packages sunburst taxizedbextra","code":"# remotes::install_github(\"selkamand/sunburst\") library(sunburst)   # remotes::install_github(\"selkamand/taxizedbextra\") library(taxizedbextra)"},{"path":"https://selkamand.github.io/sunburst/articles/microbial_sunbursts.html","id":"download-ncbi-taxonomy-database","dir":"Articles","previous_headings":"","what":"Download ncbi taxonomy database","title":"Microbial Sunburst Plots","text":"First, lets use `db_download_ncbi()` taxizedb (exposed taxizedbextra) download ncbi taxonomy database locally help us build sunburst plots taxonomy ids blistering speed. just 2 gigs might take , ’ll worth road. macbook saves db ~/Library/Caches/R/taxizedb. can check downloaded running locate_taxonomy_cache()","code":"# Download ncbi taxonomy database.  db_download_ncbi(overwrite = TRUE) # Where is my taxonomy database downloaded to? locate_taxonomy_cache() #> <hoard>  #>   path: taxizedb #>   cache path: ~/.cache/R/taxizedb"},{"path":"https://selkamand.github.io/sunburst/articles/microbial_sunbursts.html","id":"get-data-for-sunburst-plot","dir":"Articles","previous_headings":"","what":"Get data for sunburst plot","title":"Microbial Sunburst Plots","text":"need get data required format (numeric vector ncbi taxids) can use taxid = -1 ‘unclassified sequences’","code":"# Here we're simulating our data taxids = c(rep(561, times = 10), rep(1639, times = 20), rep(529731, times = 10))  taxids #>  [1]    561    561    561    561    561    561    561    561    561    561 #> [11]   1639   1639   1639   1639   1639   1639   1639   1639   1639   1639 #> [21]   1639   1639   1639   1639   1639   1639   1639   1639   1639   1639 #> [31] 529731 529731 529731 529731 529731 529731 529731 529731 529731 529731"},{"path":"https://selkamand.github.io/sunburst/articles/microbial_sunbursts.html","id":"create-sunburst-plot","dir":"Articles","previous_headings":"","what":"Create sunburst plot","title":"Microbial Sunburst Plots","text":"run ?microbial_sunburst() learn customise plot","code":"# generate sunburst plot microbial_sunburst(   taxids = taxids,    ranks_to_include = c(\"species\", \"genus\", \"family\")   ) #> [ℹ] Getting taxid lineages #> [ℹ] Constructing sunburst plot #> Registered S3 method overwritten by 'httr': #>   method           from   #>   print.cache_info hoardr"},{"path":"https://selkamand.github.io/sunburst/articles/microbial_sunbursts.html","id":"acknowledgements","dir":"Articles","previous_headings":"","what":"Acknowledgements","title":"Microbial Sunburst Plots","text":"engines driving functionality package taxizedb plotly packages. big thanks involved creation maintenance packages.","code":""},{"path":"https://selkamand.github.io/sunburst/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sam El-Kamand. Author, maintainer.","code":""},{"path":"https://selkamand.github.io/sunburst/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"El-Kamand S (2022). sunburst: Package (One Line, Title Case). https://github.com/selkamand/sunburst, https://selkamand.github.io/sunburst/.","code":"@Manual{,   title = {sunburst: What the Package Does (One Line, Title Case)},   author = {Sam El-Kamand},   year = {2022},   note = {https://github.com/selkamand/sunburst, https://selkamand.github.io/sunburst/}, }"},{"path":"https://selkamand.github.io/sunburst/index.html","id":"sunburst-r-package","dir":"","previous_headings":"","what":"What the Package Does (One Line, Title Case)","title":"What the Package Does (One Line, Title Case)","text":"goal sunburst simplify generation sunburst plots R. plots particularly useful visualising relative frequency elements heirarchical ontology. example, microbial composition microbiome sample, composition cancer types large cohort.","code":""},{"path":"https://selkamand.github.io/sunburst/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"What the Package Does (One Line, Title Case)","text":"can install development version sunburst like :","code":"# install.packages(\"remotes\") remotes::install_github(\"selkamand/sunburst\")"},{"path":"https://selkamand.github.io/sunburst/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"What the Package Does (One Line, Title Case)","text":"general usage see general usage visualise microbial composition see microbial sunbursts vignette","code":""},{"path":"https://selkamand.github.io/sunburst/index.html","id":"example-plots","dir":"","previous_headings":"","what":"Example Plots","title":"What the Package Does (One Line, Title Case)","text":"CancerTypeSunburst microbial_sunburst","code":""},{"path":"https://selkamand.github.io/sunburst/reference/lineage2sunburst.html","id":null,"dir":"Reference","previous_headings":"","what":"Lineage 2 sunburst — lineage2sunburst","title":"Lineage 2 sunburst — lineage2sunburst","text":"Takes lineage strings e.g. 'Bacteria>Escherichia>Escherichia coli' generates sunburst plot. Size segment sunburst based lineage frequency.","code":""},{"path":"https://selkamand.github.io/sunburst/reference/lineage2sunburst.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Lineage 2 sunburst — lineage2sunburst","text":"","code":"lineage2sunburst(   lineage,   sep = \">\",   return_dataframe = FALSE,   verbose = FALSE,   textorientation = c(\"horizontal\", \"radial\", \"tangential\"),   unit = \"N\" )"},{"path":"https://selkamand.github.io/sunburst/reference/lineage2sunburst.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Lineage 2 sunburst — lineage2sunburst","text":"lineage e.g. 'Bacteria>Escherichia>Escherichia coli' (character). Can generate microbes using taxizedbextra::taxid2lineage() sep character separates parent-child lineage strings (string) return_dataframe instead returning plot, return dataframe used generate plot (boolean) verbose verbose (boolean) textorientation orientation sunburst labels. One \"horizontal\", \"radial\", \"tangential\" (string) unit count represent, e.g. 'reads' 'samples' (string)","code":""},{"path":"https://selkamand.github.io/sunburst/reference/lineage2sunburst.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Lineage 2 sunburst — lineage2sunburst","text":"sunburst plot (plotly) inheritance + count dataframe return_dataframe TRUE","code":""},{"path":"https://selkamand.github.io/sunburst/reference/lineage2sunburst.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Lineage 2 sunburst — lineage2sunburst","text":"","code":"if (FALSE) { taxids = c(rep(562, each =  50), rep(28901, times = 20))   #Convert NCBI taxids to lineage strings  lineage_strings = taxizedbextra::taxid2lineage(taxids)  lineage2sunburst(lineage_strings, sep = \">\")  }"},{"path":"https://selkamand.github.io/sunburst/reference/microbial_sunburst.html","id":null,"dir":"Reference","previous_headings":"","what":"Microbial Sunburst — microbial_sunburst","title":"Microbial Sunburst — microbial_sunburst","text":"Build sunburst taxids","code":""},{"path":"https://selkamand.github.io/sunburst/reference/microbial_sunburst.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Microbial Sunburst — microbial_sunburst","text":"","code":"microbial_sunburst(   taxids,   ultimate_ancestor = \"microbial\\ncomposition\",   show_ranks = FALSE,   ranks_to_include = c(\"strain\", \"species\", \"genus\", \"family\"),   special_taxid_names = c(unclassified = -1) )"},{"path":"https://selkamand.github.io/sunburst/reference/microbial_sunburst.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Microbial Sunburst — microbial_sunburst","text":"taxids NCBI taxonomy IDs (numeric) ultimate_ancestor Text add (string) show_ranks ranks lineage level added (boolean) ranks_to_include ranks include lineage string (character) special_taxid_names taxids <= 0 can define special names. (named numeric vector names = names values = taxids)","code":""},{"path":"https://selkamand.github.io/sunburst/reference/microbial_sunburst.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Microbial Sunburst — microbial_sunburst","text":"sunburst figure (plotly)","code":""},{"path":"https://selkamand.github.io/sunburst/reference/microbial_sunburst.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Microbial Sunburst — microbial_sunburst","text":"","code":"if (FALSE) { taxids = c(rep(561, times = 10), rep(1639, times = 20), rep(529731, times = 10)) microbial_sunburst(taxids) }"},{"path":"https://selkamand.github.io/sunburst/reference/sunburst.html","id":null,"dir":"Reference","previous_headings":"","what":"Sunburst Plot — sunburst","title":"Sunburst Plot — sunburst","text":"Sunburst Plot","code":""},{"path":"https://selkamand.github.io/sunburst/reference/sunburst.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sunburst Plot — sunburst","text":"","code":"sunburst(   data,   textorientation = c(\"horizontal\", \"radial\", \"tangential\"),   verbose = FALSE,   unit = \"N\" )"},{"path":"https://selkamand.github.io/sunburst/reference/sunburst.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sunburst Plot — sunburst","text":"data data.frame three columns: Label, Parent Value. See details information textorientation orientation sunburst labels. One \"horizontal\", \"radial\", \"tangential\" (string) verbose verbose (boolean) unit count represent, e.g. 'reads' 'samples' (string)","code":""},{"path":"https://selkamand.github.io/sunburst/reference/sunburst.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sunburst Plot — sunburst","text":"plotly figure","code":""},{"path":[]},{"path":"https://selkamand.github.io/sunburst/reference/sunburst.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sunburst Plot — sunburst","text":"","code":"data = data.frame(   Label=c(\"E. coli\",\"S. enterica\", \"L. monocytogenes\", \"Escherichia\", \"Salmonella\", \"Listeria\"),   Parent = c(\"Escherichia\", \"Salmonella\", \"Listeria\",  \"Bacteria\", \"Bacteria\", \"Bacteria\"),   Value = c(20, 10, 100,0, 0, 0) ) sunburst(data)  {\"x\":{\"visdat\":{\"2b2c6177e6c8\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"2b2c6177e6c8\",\"attrs\":{\"2b2c6177e6c8\":{\"labels\":[\"E. coli\",\"S. enterica\",\"L. monocytogenes\",\"Escherichia\",\"Salmonella\",\"Listeria\"],\"parents\":[\"Escherichia\",\"Salmonella\",\"Listeria\",\"Bacteria\",\"Bacteria\",\"Bacteria\"],\"values\":[20,10,100,0,0,0],\"insidetextorientation\":\"horizontal\",\"branchvalues\":\"total\",\"hovertemplate\":\"<b>%{label}<\\/b><br>N: %{value}<br>%{percentParent: .1%} of %{parent}<br>%{percentRoot: .1%} of %{root}<br>%{currentPath}%{label}<br><extra><\\/extra>\",\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"sunburst\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"labels\":[\"E. coli\",\"S. enterica\",\"L. monocytogenes\",\"Escherichia\",\"Salmonella\",\"Listeria\"],\"parents\":[\"Escherichia\",\"Salmonella\",\"Listeria\",\"Bacteria\",\"Bacteria\",\"Bacteria\"],\"values\":[20,10,100,0,0,0],\"insidetextorientation\":\"horizontal\",\"branchvalues\":\"total\",\"hovertemplate\":[\"<b>%{label}<\\/b><br>N: %{value}<br>%{percentParent: .1%} of %{parent}<br>%{percentRoot: .1%} of %{root}<br>%{currentPath}%{label}<br><extra><\\/extra>\",\"<b>%{label}<\\/b><br>N: %{value}<br>%{percentParent: .1%} of %{parent}<br>%{percentRoot: .1%} of %{root}<br>%{currentPath}%{label}<br><extra><\\/extra>\",\"<b>%{label}<\\/b><br>N: %{value}<br>%{percentParent: .1%} of %{parent}<br>%{percentRoot: .1%} of %{root}<br>%{currentPath}%{label}<br><extra><\\/extra>\",\"<b>%{label}<\\/b><br>N: %{value}<br>%{percentParent: .1%} of %{parent}<br>%{percentRoot: .1%} of %{root}<br>%{currentPath}%{label}<br><extra><\\/extra>\",\"<b>%{label}<\\/b><br>N: %{value}<br>%{percentParent: .1%} of %{parent}<br>%{percentRoot: .1%} of %{root}<br>%{currentPath}%{label}<br><extra><\\/extra>\",\"<b>%{label}<\\/b><br>N: %{value}<br>%{percentParent: .1%} of %{parent}<br>%{percentRoot: .1%} of %{root}<br>%{currentPath}%{label}<br><extra><\\/extra>\"],\"type\":\"sunburst\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(255,255,255,1)\"}},\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}"}]
